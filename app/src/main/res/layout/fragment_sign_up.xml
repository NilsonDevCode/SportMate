<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="24dp">

        <TextView
            android:id="@+id/tvTituloForm"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/sign_up_title"
            android:textSize="22sp"
            android:textStyle="bold"
            android:layout_marginBottom="16dp"/>

        <!-- Alias -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutAlias"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_alias_label"
            android:layout_marginBottom="12dp">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etAlias"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textPersonName"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Nombre -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutNombre"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_name_label"
            android:layout_marginBottom="12dp">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etNombre"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Apellidos (solo Usuario) -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutApellidos"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_surname_label"
            android:layout_marginBottom="12dp"
            android:visibility="visible">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etApellidos"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Razón Social (solo Ayuntamiento) -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutNumero"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_social_reason_label"
            android:layout_marginBottom="12dp"
            android:visibility="gone">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etNumero"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textCapWords"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Comunidad + Spinner -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="12dp"
            android:weightSum="1">

            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/layoutComunidad"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/sign_up_community_label">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/etDescripcionEvento"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:clickable="false"/>
            </com.google.android.material.textfield.TextInputLayout>

            <Spinner
                android:id="@+id/spComunidad"
                android:layout_width="120dp"
                android:layout_height="wrap_content"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- Provincia + Spinner -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="12dp"
            android:weightSum="1">

            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/layoutProvincia"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/sign_up_province_label">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/etReglasEvento"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:clickable="false"/>
            </com.google.android.material.textfield.TextInputLayout>

            <Spinner
                android:id="@+id/spProvincia"
                android:layout_width="120dp"
                android:layout_height="wrap_content"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- Ciudad + Spinner -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="12dp"
            android:weightSum="1">

            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/layoutCiudad"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/sign_up_city_label">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/etMateriales"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:clickable="false"/>
            </com.google.android.material.textfield.TextInputLayout>

            <Spinner
                android:id="@+id/spCiudad"
                android:layout_width="120dp"
                android:layout_height="wrap_content"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- BLOQUE USUARIO: Pueblo (selector) + Ayuntamiento (solo lectura) -->
        <LinearLayout
            android:id="@+id/blocUsuario"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="visible">

            <!-- Pueblo + Spinner (Usuario elige pueblo existente de la ciudad) -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_marginBottom="12dp"
                android:weightSum="1">

                <com.google.android.material.textfield.TextInputLayout
                    android:id="@+id/layoutPuebloUsuario"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:hint="@string/sign_up_town_label">

                    <com.google.android.material.textfield.TextInputEditText
                        android:id="@+id/etPuebloUsuario"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:focusable="false"
                        android:clickable="false"/>
                </com.google.android.material.textfield.TextInputLayout>

                <Spinner
                    android:id="@+id/spPuebloUsuario"
                    android:layout_width="120dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="12dp"/>
            </LinearLayout>

            <!-- Ayuntamiento (auto, leído del pueblo elegido) -->
            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/layoutAyuntamientoUsuario"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/sign_up_townhall_label"
                android:layout_marginBottom="12dp">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/etAyuntamientoUsuario"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:clickable="false"/>
            </com.google.android.material.textfield.TextInputLayout>
        </LinearLayout>

        <!-- BLOQUE AYUNTAMIENTO: Crear pueblo nuevo -->
        <LinearLayout
            android:id="@+id/blocAyuntamiento"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="gone">

            <!-- Campo para crear pueblo (Ayuntamiento) -->
            <com.google.android.material.textfield.TextInputLayout
                android:id="@+id/layoutPuebloAyto"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/sign_up_create_town_label"
                android:layout_marginBottom="12dp">

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/etPuebloAyto"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:inputType="textCapWords"/>
            </com.google.android.material.textfield.TextInputLayout>
        </LinearLayout>

        <!-- Contraseña -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutPassword"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_password_label"
            app:passwordToggleEnabled="true"
            android:layout_marginBottom="12dp">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etPassword"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textPassword"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Repetir contraseña -->
        <com.google.android.material.textfield.TextInputLayout
            android:id="@+id/layoutPassword2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/sign_up_confirm_password_label"
            app:passwordToggleEnabled="true"
            android:layout_marginBottom="16dp">
            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/etPassword2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textPassword"/>
        </com.google.android.material.textfield.TextInputLayout>

        <!-- Selección de rol -->
        <TextView
            android:id="@+id/tvRolLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/sign_up_select_role"
            android:layout_marginBottom="8dp"/>

        <RadioGroup
            android:id="@+id/rgRol"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="20dp">

            <RadioButton
                android:id="@+id/rbUsuario"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/sign_up_user_role"
                android:tag="usuario"
                android:checked="true"/>

            <RadioButton
                android:id="@+id/rbAyuntamiento"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/sign_up_townhall_role"
                android:tag="ayuntamiento"
                android:layout_marginStart="24dp"/>
        </RadioGroup>

        <!-- Spinner Ayuntamientos (si lo necesitas más tarde, por ahora oculto) -->
        <Spinner
            android:id="@+id/spinnerAyuntamientos"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="gone"
            android:layout_marginBottom="20dp"/>

        <com.google.android.material.button.MaterialButton
            android:id="@+id/btnRegistrar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/sign_up_button"/>
    </LinearLayout>
</ScrollView>